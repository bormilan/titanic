---
title: "Titanic Temalabor"
output: pdf_notebook
---

Olvassuk be az adatokat:
```{r}
train <- read.csv('train.csv')
test <- read.csv('test.csv')
valid <- read.csv('gender_submission.csv')
```

Elemezzuk a tipusaikat es ertekeiket:
```{r}
str(train)
sapply(train, function(y) sum(length(which(is.na(y)))))
sapply(train, function(y) sum(length(which(y == ""))))
```
Tehat az Age oszlopban 177 na ertek van, ezert ezeket a sorokat torolni kell.
A Cabin oszlopban pedig 687 ures rekord, ezert az egeszet eldobom, ugyanis igy nem veszem hasznat.
Az embarked oszlopban van meg ket ures rekord, ezekbe egyesevel beletoltom az oszlop legtobbszor megjeleno erteket.

```{r}
train <- na.omit(train)

train$Cabin <- NULL

nulls <- train[train$Embarked == "",]
table(train$Embarked)
train[train$Name == "Icard, Miss. Amelie","Embarked"] <- "C"
train[train$Name == "Stone, Mrs. George Nelson (Martha Evelyn)","Embarked"] <- "C"
```
Emellett a tablat nezve arra a dontesre jutottam, hogy a Ticket oszlop most nem fog segitseget nyujtani ugyhogy azt elhagyom.
```{r}
train$Ticket <- NULL
```

Most a test halmazt is tekintsuk ugyanigy meg:
```{r}
summary(test)
sapply(test, function(y) sum(length(which(is.na(y)))))
sapply(test, function(y) sum(length(which(y == ""))))
```
Itt azt latjuk hogy az age oszlopban hianyzik 86 ertek. Ez elég sok ha azt nezzuk hogy 418 sor van alapvetoen a tablaban, de ezekkel a sorokkal sajnos akkor sem tudunk mit csinalni, torolni kell.
Illetve a Cabin oszlopot itt is szinten toroljuk, illetve a ticket oszlopot is.
```{r}
test <- na.omit(test)

test$Cabin <- NULL
test$Ticket <- NULL
```
Most nezzuk meg a valid halmazunk hogy nez ki:
```{r}
summary(valid)
```



Nezzuk meg hogy az utasok hany szazaleka elte tul a tanito adathalmazban:
```{r}
temp <- table(train$Survived == 1)
pct <- (temp[2] / (temp[1] + temp[2]))*100
cat(round(pct,2),"%")
```
nezzuk meg hogy a tulelok hogyan oszlanak meg nemek szerint:
```{r}
f_sex <- factor(train$Sex)
f_survived <- factor(train$Survived)
males <- length(train[train$Survived == 1 & train$Sex == "male","Name"])
females <- length(train[train$Survived == 1 & train$Sex == "female","Name"])
all_survived <- males + females
cat("Összesen túlélte:",all_survived,"ember, ebből",females," nő, és",males,"férfi")

survived_bar <- c(males,females)
names(survived_bar) <- c("male","female")

barplot(survived_bar,horiz = T,col = rainbow(25),xlim=c(0,200))
```
Láthatjuk hogy több mint kétszerannyi nő élte túl, mint férfi.


Nezzuk meg az emberek korainak eloszlasat:
```{r}
plot(x = train$Sex, y = train$Age,
col ="blue", pch = 1, cex = 1.5,
main = "Utasok kor eloszlása nem szerint",
xlab = "",
ylab = "Kor"
)
```
Most nezzuk meg hogy ez hogy nez ki, ha csak a tuleloket vesszuk bele:
```{r}
survived <- train[train$Survived == 1,]

plot(x = survived$Sex, y = survived$Age,
col ="blue", pch = 1, cex = 1.5,
main = "Utasok kor eloszlása nem szerint",
xlab = "",
ylab = "Kor"
)
```

most nezzuk meg hogy testverek szerint hogyan oszlanak meg az utasok:
```{r}
sibsbTable <- table(train$SibSp)
barplot(sibsbTable,ylab="testvérek száma",xlab="fők száma",horiz = T,col= rainbow(25),xlim=c(0,200))
```

Ebbol lathatjuk hogy a legtobben vagy egyaltalan nem, vagy csak egy tetvert hoztak az utra.

Ezután azt is erdekes megfigyelni hogy hanyan erkeztek gyermekkel vagy szulovel:
```{r}
parchTable <- table(train$Parch)
barplot(parchTable,ylab="szülő vagy gyerekek száma",xlab="fők száma",horiz = T,col= rainbow(25),xlim=c(0,200))
```
Erdekes hogy van egy eset ahol 6 gyermek/szulo is jott az utassal, viszont nagyreszt itt is az utasok vagy egyaltalan nem vagy csak egy szulo/gyermek-et hoztak magukkal. Itt tobben vannak olyanok is akik kettovel, viszont a tobbi nagyon elenyeszo.

Ezutan nezzunk meg egy kicsit erdekesebb osszefuggest is, megpedig hogy osztalyok szerint milyen eloszlasban eltek tul az utasok:
```{r}
pclassTable <- table(survived$Pclass)
barplot(pclassTable,xlab="fők száma", ylab="osztályok",col=rainbow(25),horiz = T)
```

Érdekes látni hogy elso osztalyon utazokent sokkal nagyobb esellyel eltek tul az emberek, és hogy a masodik es harmadik osztalyon ugyanannyian vannak nagysagrendileg a tulelok.

Ezutan azt is erdekes lenne megtekinteni hogy szazalekos aranyban hogy nez ki a tulelok aranya, osztalyok szerint:
```{r}
c1pct <- (sum(survived$Pclass == 1) / sum(train$Pclass == 1))
c2pct <- (sum(survived$Pclass == 2) / sum(train$Pclass == 2))
c3pct <- (sum(survived$Pclass == 3) / sum(train$Pclass == 3))
allPct <- c(c1pct,c2pct,c3pct)
names(allPct) <- c(1,2,3)
barplot(allPct,xlim=c(0,1),horiz = T,col = rainbow(25))
```
Százalékosan nézve az arányokat viszont nagyon látszik, hogy minél alacsonyabb osztályon utazott az utas, annál kevesebb esélye volt túlélni a katasztrófát.



































